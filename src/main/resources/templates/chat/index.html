<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chat Interno</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/sidebar.css" />
  <link rel="stylesheet" href="/css/notifications.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-demi@0.14.6/lib/index.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pinia@2.1.7/dist/pinia.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
  <div class="app-container">
    <aside th:replace="~{components/sidebar :: sidebar}"></aside>
    <main class="main-content">
      <header th:replace="~{components/topbar :: topbar}"></header>
      <section class="content-area">
        <style>
        .teams-shell { display: grid; grid-template-columns: 64px 340px 1fr; height: calc(100vh - 80px); gap: 0; }
        .teams-rail { background: #1f2937; display: flex; flex-direction: column; align-items: center; padding: 12px 0; gap: 10px; }
        .rail-btn { width: 44px; height: 44px; border-radius: 8px; border: none; background: transparent; color: #cbd5e1; }
        .rail-btn.active { background: #374151; color: #fff; }
        .teams-main { display: grid; grid-template-columns: 340px 1fr; }
        .teams-conversations { border-right: 1px solid #e5e7eb; background: #f9fafb; display: flex; flex-direction: column; }
        .panel-header { display: flex; align-items: center; gap: 8px; padding: 12px; border-bottom: 1px solid #e5e7eb; }
        .panel-header .title { font-weight: 600; flex: 1; }
        .teams-chat { background: #fff; display: flex; flex-direction: column; }
        .teams-chat-pane { display: flex; flex-direction: column; height: 100%; }
        .teams-chat-header { padding: 12px 16px; border-bottom: 1px solid #e5e7eb; }
        .teams-chat-header .title { font-weight: 600; }
        .teams-messages { flex: 1; overflow: auto; padding: 16px; display: flex; flex-direction: column; gap: 8px; }
        .message { display: flex; }
        .message.incoming { justify-content: flex-start; }
        .message.outgoing { justify-content: flex-end; }
        .bubble { max-width: 60%; padding: 10px 12px; border-radius: 12px; box-shadow: 0 1px 2px rgba(0,0,0,.06); }
        .incoming .bubble { background: #f3f4f6; color: #111827; }
        .outgoing .bubble { background: #2563eb; color: #fff; }
        .sender { font-size: 12px; opacity: 0.8; margin-bottom: 4px; }
        .teams-composer { display: flex; gap: 8px; padding: 12px 16px; border-top: 1px solid #e5e7eb; }
        </style>
        <div class="container-fluid py-2">
          <div id="app"></div>
        </div>
      </section>
      <footer th:replace="~{components/footer :: footer}"></footer>
    </main>
  </div>
  <script th:inline="javascript">window.CHAT_USER_ID = [[${usuarioId}]]; window.CHAT_USER_NAME = [[${#strings.escapeJavaScript(usuarioNome)}]];</script>
  <script src="/js/chat-app.js"></script>
  <script th:src="@{/js/notifications.js}"></script>
  <script src="/js/sidebar.js" defer></script>
</body>
</html>
