<div class="sidebar" th:fragment="sidebar">
  <div>
    <div class="user-panel">
      <img th:if="${usuarioLogado != null}" th:src="@{/usuarios/{id}/foto(id=${usuarioLogado.id})}"
        alt="Foto do usuário" class="user-avatar" />
      <div class="user-name" th:text="${usuarioLogado != null ? usuarioLogado.nome : 'Usuário'}">Nome do Usuário</div>
    </div>

    <nav>
      <ul>
        <!-- Itens comuns - essenciais -->
        <li><a href="/dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>

        <li>
          <a th:href="@{/usuarios/{id}/editar(id=${usuarioLogado.id})}">
            <i class="fas fa-user-cog"></i> Meu Perfil
          </a>
        </li>

        <li><a href="/clientes"><i class="fas fa-address-book"></i> Clientes</a></li>
        <li><a href="/vendas"><i class="fas fa-cash-register"></i> Vendas</a></li>
        <li><a href="/fornecedores"><i class="fas fa-handshake"></i> Fornecedores</a></li>
        <li><a href="/produtos"><i class="fas fa-boxes"></i> Produtos</a></li>
        <li><a href="/estoque"><i class="fas fa-warehouse"></i> Estoque</a></li>
        <li class="has-submenu">
          <a href="javascript:void(0);" class="submenu-toggle">
            <i class="fas fa-tags"></i> Categorias <i class="fas fa-chevron-down submenu-icon"></i>
          </a>
          <ul class="submenu" style="display: none;">
            <li><a href="/categorias"><i class="fas fa-list"></i> Listar Categorias</a></li>
            <li><a href="/categorias/nova"><i class="fas fa-plus-circle"></i> Nova Categoria</a></li>
          </ul>
        </li>


        <!-- Itens financeiros comuns -->
        <li><a href="/contas-pagar"><i class="fas fa-money-check-alt"></i> Contas a Pagar</a></li>
        <li><a href="/contas-receber"><i class="fas fa-file-invoice-dollar"></i> Contas a Receber</a></li>

        <!-- Itens operacionais -->
        <li><a href="/servicos"><i class="fas fa-tools"></i> Serviços</a></li>
        <li><a href="/agenda"><i class="fas fa-calendar-check"></i> Agenda</a></li>

        <!-- Itens ADMIN -->
        <li th:if="${isAdmin}"><a href="/usuarios/index"><i class="fas fa-user-friends"></i> Usuários</a></li>
        <li th:if="${isAdmin}"><a href="/permissoes"><i class="fas fa-user-shield"></i> Perfis e Permissões</a></li>
        <li th:if="${isAdmin}"><a href="/financeiro"><i class="fas fa-wallet"></i> Financeiro</a></li>
        <li th:if="${isAdmin}"><a href="/relatorios"><i class="fas fa-chart-pie"></i> Relatórios</a></li>
        <li th:if="${isAdmin}"><a href="/documentos"><i class="fas fa-file-alt"></i> Documentos</a></li>
        <li th:if="${isAdmin}"><a href="/suporte"><i class="fas fa-life-ring"></i> Suporte</a></li>
        <li th:if="${isAdmin}"><a href="/configuracoes"><i class="fas fa-cogs"></i> Configurações</a></li>
        <li th:if="${isAdmin}"><a href="/metas"><i class="fas fa-bullseye"></i> Metas</a></li>
        <li th:if="${isAdmin}"><a href="/transferencias"><i class="fas fa-exchange-alt"></i> Transferências</a></li>

        <!-- Itens USER -->
        <li th:if="${!isAdmin}"><a href="/chat"><i class="fas fa-comments"></i> Chat</a></li>
        <li th:if="${!isAdmin}"><a href="/ajuda"><i class="fas fa-question-circle"></i> Central de Ajuda</a></li>
        <li th:if="${!isAdmin}"><a href="/termos"><i class="fas fa-file-contract"></i> Termos de Uso</a></li>
        <li th:if="${!isAdmin}"><a href="/meus-pedidos"><i class="fas fa-clipboard-list"></i> Meus Pedidos</a></li>
        <li th:if="${!isAdmin}"><a href="/meus-servicos"><i class="fas fa-concierge-bell"></i> Meus Serviços</a></li>
        <li th:if="${!isAdmin}"><a href="/favoritos"><i class="fas fa-star"></i> Favoritos</a></li>
        <li th:if="${!isAdmin}"><a href="/recomendacoes"><i class="fas fa-thumbs-up"></i> Recomendados</a></li>
        <li th:if="${!isAdmin}"><a href="/documentos"><i class="fas fa-file-alt"></i> Documentos</a></li>
        <li th:if="${!isAdmin}"><a href="/suporte"><i class="fas fa-life-ring"></i> Suporte</a></li>

        <!-- Logout sempre no fim -->
        <li><a href="/logout"><i class="fas fa-power-off"></i> Sair</a></li>
      </ul>
    </nav>
  </div>
  <script th:src="@{/js/sidebar.js}"></script>
</div>