<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Ajuste de Estoque</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" th:href="@{/css/style.css}" />
  <link rel="stylesheet" th:href="@{/css/estoque.css}" />
</head>
<body>
  <div class="app-container">
    <aside th:replace="~{components/sidebar :: sidebar}"></aside>

    <main class="main-content">
      <header th:replace="~{components/topbar :: topbar}"></header>

      <section class="content-area">
        <h1>Ajustar Estoque: <span th:text="${produto.nome}"></span></h1>

        <a th:href="@{'/estoque/' + ${produto.id} + '/movimentacoes'}" class="btn btn-secondary mb-3">
          <i class="fas fa-arrow-left"></i> Voltar às Movimentações
        </a>

        <article class="card p-3">
          <form th:action="@{'/estoque/' + ${produto.id} + '/ajustar'}" method="post" th:object="${ajuste}">
            <div class="form-group">
              <label for="quantidade">Quantidade</label>
              <input type="number" id="quantidade" name="quantidade" min="1" required th:value="*{quantidade}" class="form-control" />
              <div th:if="${#fields.hasErrors('quantidade')}" class="error">
                <p th:errors="*{quantidade}"></p>
              </div>
            </div>

            <div class="form-group">
              <label for="tipo">Tipo de Ajuste</label>
              <select id="tipo" name="tipo" required th:value="*{tipo}" class="form-control">
                <option value="">-- Selecione --</option>
                <option value="ENTRADA" th:selected="*{tipo == 'ENTRADA'}">Entrada</option>
                <option value="SAIDA" th:selected="*{tipo == 'SAIDA'}">Saída</option>
              </select>
              <div th:if="${#fields.hasErrors('tipo')}" class="error">
                <p th:errors="*{tipo}"></p>
              </div>
            </div>

            <div class="form-group">
              <label for="motivo">Motivo</label>
              <textarea id="motivo" name="motivo" required th:text="*{motivo}" class="form-control"></textarea>
              <div th:if="${#fields.hasErrors('motivo')}" class="error">
                <p th:errors="*{motivo}"></p>
              </div>
            </div>

            <button type="submit" class="btn btn-primary">Salvar Ajuste</button>
          </form>
        </article>
      </section>

      <footer th:replace="~{components/footer :: footer}"></footer>
    </main>
  </div>
</body>
</html>
