<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notificações Profissionais</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
/* --- Topbar --- */
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f3f4f6; }
.topbar { display:flex; justify-content: space-between; align-items: center; padding:10px 20px; background:#1f2937; color:white; position:relative; }
.topbar h1 { margin:0; font-size:20px; }
.topbar .topbar-actions { display:flex; align-items:center; gap:10px; position:relative; }
.topbar .topbar-btn { color:white; font-size:18px; position:relative; cursor:pointer; }
.notification-badge { position:absolute; top:-5px; right:-5px; background:red; color:white; border-radius:50%; width:18px; height:18px; font-size:12px; display:flex; align-items:center; justify-content:center; display:none; }

/* --- Painel lateral --- */
.notification-panel { position:fixed; top:0; right:-400px; width:400px; height:100%; background:white; box-shadow:-4px 0 20px rgba(0,0,0,0.2); transition: right 0.3s ease; z-index:1000; display:flex; flex-direction:column; }
.notification-panel.show { right:0; }
.notification-header { padding:15px; border-bottom:1px solid #ddd; display:flex; justify-content:space-between; align-items:center; }
.notification-header h3 { margin:0; font-size:18px; }
.notification-list { flex:1; overflow-y:auto; padding:0; margin:0; list-style:none; }
.notification-item { padding:12px 15px; border-bottom:1px solid #eee; cursor:pointer; }
.notification-item.unread { background:#eff6ff; border-left:3px solid #3b82f6; }
.notification-item h4 { margin:0 0 5px 0; font-size:14px; }
.notification-item p { margin:0; font-size:12px; color:#555; }
.notification-footer { padding:10px 15px; border-top:1px solid #ddd; }

/* --- Modal --- */
.modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center; z-index:1100; }
.modal.show { display:flex; }
.modal-content { background:white; padding:20px; border-radius:8px; width:350px; }
.modal-content h3 { margin-top:0; }
.modal-content input, .modal-content select, .modal-content textarea { width:100%; margin-bottom:10px; padding:8px; font-size:14px; }
.modal-content button { padding:8px 15px; cursor:pointer; }

/* --- Toast --- */
.toast-container { position:fixed; top:20px; right:20px; display:flex; flex-direction:column; gap:10px; z-index:1200; }
.toast { background:white; border-left:4px solid #3b82f6; padding:10px 15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); display:flex; justify-content:space-between; align-items:center; min-width:250px; opacity:0; transform:translateX(100%); transition: all 0.5s ease; }
.toast.show { opacity:1; transform:translateX(0); }
.toast h4 { margin:0; font-size:14px; }
.toast p { margin:0; font-size:12px; color:#555; }
.toast button { background:none; border:none; cursor:pointer; color:#555; font-size:12px; }
</style>
</head>
<body>

<!-- Topbar -->
<div class="topbar">
  <h1>ERP Corporativo</h1>
  <div class="topbar-actions">
    <div class="topbar-btn" id="notificationTrigger">
      <i class="fas fa-bell"></i>
      <span class="notification-badge" id="notificationBadge">0</span>
    </div>
    <button id="openModalBtn">Nova Notificação</button>
  </div>
</div>

<!-- Painel lateral -->
<div class="notification-panel" id="notificationPanel">
  <div class="notification-header">
    <h3><i class="fas fa-bell"></i> Notificações</h3>
    <button id="closePanelBtn">X</button>
  </div>
  <ul class="notification-list" id="notificationList">
    <!-- Itens serão inseridos via JS -->
  </ul>
  <div class="notification-footer">
    <button id="markAllReadBtn">Marcar todas como lidas</button>
  </div>
</div>

<!-- Modal -->
<div class="modal" id="notificationModal">
  <div class="modal-content">
    <h3>Criar Notificação</h3>
    <input type="text" id="notifTitle" placeholder="Título">
    <textarea id="notifMessage" placeholder="Mensagem"></textarea>
    <select id="notifPriority">
      <option value="low">Baixa</option>
      <option value="medium">Média</option>
      <option value="high">Alta</option>
    </select>
    <button id="sendNotifBtn">Enviar</button>
    <button id="closeModalBtn">Cancelar</button>
  </div>
</div>

<!-- Toast container -->
<div class="toast-container" id="toastContainer"></div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
$(document).ready(function(){
  let notifications = [];
  
  function updateBadge() {
    const unreadCount = notifications.filter(n => !n.read).length;
    $('#notificationBadge').text(unreadCount).toggle(unreadCount > 0);
  }

  function renderNotifications() {
    const $list = $('#notificationList').empty();
    notifications.forEach((n, i) => {
      const item = $(`
        <li class="notification-item ${n.read?'':'unread'}">
          <h4>${n.title}</h4>
          <p>${n.message}</p>
        </li>
      `);
      $list.append(item);
    });
    updateBadge();
  }

  function showToast(title, message, priority='medium') {
    const toast = $(`
      <div class="toast ${priority} show">
        <div>
          <h4>${title}</h4>
          <p>${message}</p>
        </div>
        <button>X</button>
      </div>
    `);
    toast.find('button').click(() => toast.remove());
    $('#toastContainer').append(toast);
    setTimeout(()=> toast.remove(), 5000);
  }

  // Abrir/Fechar painel
  $('#notificationTrigger').click(()=>$('#notificationPanel').toggleClass('show'));
  $('#closePanelBtn').click(()=>$('#notificationPanel').removeClass('show'));

  // Abrir/Fechar modal
  $('#openModalBtn').click(()=>$('#notificationModal').addClass('show'));
  $('#closeModalBtn').click(()=>$('#notificationModal').removeClass('show'));

  // Criar notificação
  $('#sendNotifBtn').click(()=>{
    const title = $('#notifTitle').val();
    const message = $('#notifMessage').val();
    const priority = $('#notifPriority').val();
    if(!title || !message) { alert('Preencha título e mensagem'); return; }
    
    const notif = {title,message,priority,read:false};
    notifications.unshift(notif); // adiciona no topo
    renderNotifications();
    showToast(title,message,priority);
    $('#notificationModal').removeClass('show');
    $('#notifTitle').val(''); $('#notifMessage').val('');
  });

  // Marcar todas como lidas
  $('#markAllReadBtn').click(()=>{
    notifications.forEach(n=>n.read=true);
    renderNotifications();
  });

});
</script>

</body>
</html>
