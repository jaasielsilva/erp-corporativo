<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Relatórios de Folha - ERP Corporativo</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" th:href="@{/css/style.css}" />
  <link rel="stylesheet" th:href="@{/css/sidebar.css}" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="app-container">
    <aside th:replace="~{components/sidebar :: sidebar}"></aside>

    <main class="main-content">
      <header th:replace="~{components/topbar :: topbar}"></header>

      <section class="content-area">
        <h1>Relatórios de Folha de Pagamento</h1>
        <h2>Análises e relatórios detalhados</h2>

        <div class="action-buttons">
          <a href="/rh/folha-pagamento/gerar" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Voltar
          </a>
          <button onclick="exportarTodosRelatorios()" class="btn btn-success">
            <i class="fas fa-download"></i> Exportar Todos
          </button>
        </div>

        <!-- Filtros Gerais -->
        <article class="card">
          <h3><i class="fas fa-filter"></i> Filtros</h3>
          <form class="form-container">
            <div class="form-row">
              <div class="form-group">
                <label for="periodoInicio">Período - Início</label>
                <input type="month" id="periodoInicio" name="periodoInicio" class="form-control" value="2023-01">
              </div>
              <div class="form-group">
                <label for="periodoFim">Período - Fim</label>
                <input type="month" id="periodoFim" name="periodoFim" class="form-control" value="2023-11">
              </div>
              <div class="form-group">
                <label for="departamentoRel">Departamento</label>
                <select id="departamentoRel" name="departamentoId" class="form-control">
                  <option value="">Todos os departamentos</option>
                  <option th:each="d : ${departamentos}" th:value="${d.id}" th:text="${d.nome}"></option>
                </select>
              </div>
              <div class="form-group">
                <button type="button" onclick="atualizarRelatorios()" class="btn btn-primary">
                  <i class="fas fa-sync"></i> Atualizar
                </button>
              </div>
            </div>
          </form>
        </article>

        <!-- Resumo Executivo -->
        <article class="card">
          <h3><i class="fas fa-chart-line"></i> Resumo Executivo</h3>
          <div class="resumo-executivo" th:if="${resumoAtual}">
            <div class="resumo-grid">
              <div class="resumo-card salarios">
                <div class="resumo-icon">
                  <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="resumo-info">
                  <h4>Total Salários</h4>
                  <div class="resumo-valor" th:text="${#numbers.formatCurrency(resumoAtual.totalProventos)}"></div>
                  <div class="resumo-variacao positiva">
                    <i class="fas fa-arrow-up"></i> +5.2% vs mês anterior
                  </div>
                </div>
              </div>
              
              <div class="resumo-card descontos">
                <div class="resumo-icon">
                  <i class="fas fa-minus-circle"></i>
                </div>
                <div class="resumo-info">
                  <h4>Total Descontos</h4>
                  <div class="resumo-valor" th:text="${#numbers.formatCurrency(resumoAtual.totalDescontos)}"></div>
                  <div class="resumo-variacao negativa">
                    <i class="fas fa-arrow-down"></i> -2.1% vs mês anterior
                  </div>
                </div>
              </div>
              
              <div class="resumo-card liquido">
                <div class="resumo-icon">
                  <i class="fas fa-hand-holding-usd"></i>
                </div>
                <div class="resumo-info">
                  <h4>Folha Líquida</h4>
                  <div class="resumo-valor" th:text="${#numbers.formatCurrency(resumoAtual.totalLiquido)}"></div>
                  <div class="resumo-variacao positiva">
                    <i class="fas fa-arrow-up"></i> +7.8% vs mês anterior
                  </div>
                </div>
              </div>
              
              <div class="resumo-card colaboradores">
                <div class="resumo-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="resumo-info">
                  <h4>Colaboradores</h4>
                  <div class="resumo-valor" th:text="${resumoAtual.quantidadeHolerites}"></div>
                  <div class="resumo-variacao neutra">
                    <i class="fas fa-minus"></i> Sem alteração
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- Gráficos -->
        <div class="charts-container">
          <article class="card chart-card">
            <h3><i class="fas fa-chart-bar"></i> Evolução da Folha de Pagamento</h3>
            <canvas id="chartEvolucaoFolha" width="400" height="200"></canvas>
          </article>
          
          <article class="card chart-card">
            <h3><i class="fas fa-chart-pie"></i> Distribuição por Departamento</h3>
            <canvas id="chartDepartamentos" width="400" height="200"></canvas>
          </article>
        </div>

        <!-- Relatórios Disponíveis -->
        <article class="card">
          <h3><i class="fas fa-file-alt"></i> Relatórios Disponíveis</h3>
          <div class="relatorios-grid">
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-file-invoice-dollar"></i>
              </div>
              <div class="relatorio-info">
                <h4>Folha de Pagamento Analítica</h4>
                <p>Relatório detalhado com todos os colaboradores, proventos e descontos</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('analitica', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('analitica')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('analitica', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
            
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-chart-line"></i>
              </div>
              <div class="relatorio-info">
                <h4>Resumo Gerencial</h4>
                <p>Visão executiva com totais e indicadores principais</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('gerencial', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('gerencial')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('gerencial', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
            
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-university"></i>
              </div>
              <div class="relatorio-info">
                <h4>Obrigações Trabalhistas</h4>
                <p>INSS, IRRF, FGTS e demais obrigações por colaborador</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('obrigacoes', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('obrigacoes')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('obrigacoes', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
            
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-building"></i>
              </div>
              <div class="relatorio-info">
                <h4>Por Departamento</h4>
                <p>Análise de custos e colaboradores por departamento</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('departamento', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('departamento')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('departamento', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
            
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-calendar-alt"></i>
              </div>
              <div class="relatorio-info">
                <h4>Comparativo Mensal</h4>
                <p>Evolução da folha nos últimos 12 meses</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('comparativo', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('comparativo')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('comparativo', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
            
            <div class="relatorio-item">
              <div class="relatorio-icon">
                <i class="fas fa-heart"></i>
              </div>
              <div class="relatorio-info">
                <h4>Benefícios</h4>
                <p>Relatório de benefícios concedidos e seus custos</p>
                <div class="relatorio-actions">
                  <button onclick="gerarRelatorio('beneficios', 'visualizar')" class="btn btn-info btn-sm">
                    <i class="fas fa-eye"></i> Visualizar
                  </button>
                  <button onclick="gerarRelatorio('beneficios')" class="btn btn-primary btn-sm">
                    <i class="fas fa-file-pdf"></i> PDF
                  </button>
                  <button onclick="gerarRelatorio('beneficios', 'excel')" class="btn btn-success btn-sm">
                    <i class="fas fa-file-excel"></i> Excel
                  </button>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- Tabela Detalhada -->
        <article class="card">
          <h3><i class="fas fa-table"></i> Detalhamento da Folha Atual</h3>
          <div class="table-responsive">
            <table class="table-list">
              <thead>
                <tr>
                  <th>Colaborador</th>
                  <th>Departamento</th>
                  <th>Salário Base</th>
                  <th>Proventos</th>
                  <th>Descontos</th>
                  <th>Líquido</th>
                  <th>% Desconto</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>João Silva</td>
                  <td>TI</td>
                  <td>R$ 8.500,00</td>
                  <td>R$ 9.900,00</td>
                  <td>R$ 2.708,30</td>
                  <td>R$ 7.191,70</td>
                  <td>27.4%</td>
                  <td>
                    <button onclick="verDetalhesColaborador(1)" class="btn-icon" title="Ver Detalhes">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button onclick="gerarHolerite(1)" class="btn-icon" title="Gerar Holerite">
                      <i class="fas fa-file-invoice"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>Maria Santos</td>
                  <td>Vendas</td>
                  <td>R$ 6.000,00</td>
                  <td>R$ 6.820,00</td>
                  <td>R$ 1.580,00</td>
                  <td>R$ 5.240,00</td>
                  <td>23.2%</td>
                  <td>
                    <button onclick="verDetalhesColaborador(2)" class="btn-icon" title="Ver Detalhes">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button onclick="gerarHolerite(2)" class="btn-icon" title="Gerar Holerite">
                      <i class="fas fa-file-invoice"></i>
                    </button>
                  </td>
                </tr>
                <tr>
                  <td>Carlos Oliveira</td>
                  <td>Financeiro</td>
                  <td>R$ 12.000,00</td>
                  <td>R$ 13.200,00</td>
                  <td>R$ 3.240,00</td>
                  <td>R$ 9.960,00</td>
                  <td>24.5%</td>
                  <td>
                    <button onclick="verDetalhesColaborador(3)" class="btn-icon" title="Ver Detalhes">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button onclick="gerarHolerite(3)" class="btn-icon" title="Gerar Holerite">
                      <i class="fas fa-file-invoice"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr class="total-row">
                  <td colspan="2"><strong>TOTAIS</strong></td>
                  <td><strong>R$ 132.500,00</strong></td>
                  <td><strong>R$ 145.750,00</strong></td>
                  <td><strong>R$ 32.450,00</strong></td>
                  <td><strong>R$ 113.300,00</strong></td>
                  <td><strong>22.3%</strong></td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </article>
      </section>

      <footer th:replace="~{components/footer :: footer}"></footer>
    </main>
  </div>

  <script th:src="@{/js/script.js}"></script>
  <script>
    // Gráfico de Evolução da Folha
    const ctxEvolucao = document.getElementById('chartEvolucaoFolha').getContext('2d');
    new Chart(ctxEvolucao, {
      type: 'line',
      data: {
        labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov'],
        datasets: [{
          label: 'Folha Bruta',
          data: [120000, 125000, 130000, 128000, 135000, 140000, 138000, 142000, 145000, 143000, 145750],
          borderColor: '#007bff',
          backgroundColor: 'rgba(0, 123, 255, 0.1)',
          tension: 0.4
        }, {
          label: 'Folha Líquida',
          data: [95000, 98000, 102000, 100000, 105000, 108000, 106000, 110000, 112000, 110000, 113300],
          borderColor: '#28a745',
          backgroundColor: 'rgba(40, 167, 69, 0.1)',
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'top',
          }
        },
        scales: {
          y: {
            beginAtZero: false,
            ticks: {
              callback: function(value) {
                return 'R$ ' + value.toLocaleString('pt-BR');
              }
            }
          }
        }
      }
    });

    // Gráfico de Departamentos
    const ctxDepartamentos = document.getElementById('chartDepartamentos').getContext('2d');
    new Chart(ctxDepartamentos, {
      type: 'doughnut',
      data: {
        labels: ['TI', 'Vendas', 'Financeiro', 'RH', 'Marketing'],
        datasets: [{
          data: [45000, 35000, 25000, 15000, 10000],
          backgroundColor: [
            '#007bff',
            '#28a745',
            '#ffc107',
            '#dc3545',
            '#6f42c1'
          ]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'right',
          }
        }
      }
    });

    function atualizarRelatorios() {
      alert('Atualizando relatórios com os filtros selecionados...');
      // Implementar atualização dos dados
    }

    function gerarRelatorio(tipo, formato = 'pdf') {
      const inicio = document.getElementById('periodoInicio').value;
      const fim = document.getElementById('periodoFim').value;
      const departamento = document.getElementById('departamentoRel').value;
      
      if (!inicio || !fim) {
        alert('Por favor, selecione o período do relatório.');
        return;
      }
      
      // Mostrar loading
      const loadingDiv = document.createElement('div');
      loadingDiv.innerHTML = '<div class="alert alert-info">Gerando relatório... <i class="fas fa-spinner fa-spin"></i></div>';
      loadingDiv.style.position = 'fixed';
      loadingDiv.style.top = '20px';
      loadingDiv.style.right = '20px';
      loadingDiv.style.zIndex = '9999';
      document.body.appendChild(loadingDiv);
      
      let url;
      const params = new URLSearchParams({
        inicio: inicio,
        fim: fim
      });
      
      if (departamento) {
        params.append('departamentoId', departamento);
      }
      
      // Determinar URL baseada no tipo e formato
      if (formato === 'visualizar') {
        switch(tipo) {
          case 'analitica':
            url = `/rh/api/relatorios/folha-analitica?${params}`;
            break;
          case 'gerencial':
            url = `/rh/api/relatorios/gerencial?${params}`;
            break;
          case 'obrigacoes':
            url = `/rh/api/relatorios/obrigacoes?${params}`;
            break;
          case 'departamento':
            if (!departamento) {
              alert('Selecione um departamento para este relatório.');
              document.body.removeChild(loadingDiv);
              return;
            }
            url = `/rh/api/relatorios/departamento?${params}`;
            break;
          case 'comparativo':
            url = `/rh/api/relatorios/comparativo?${params}`;
            break;
          case 'beneficios':
            url = `/rh/api/relatorios/beneficios?${params}`;
            break;
          default:
            alert('Tipo de relatório não suportado.');
            document.body.removeChild(loadingDiv);
            return;
        }
        
        // Fazer requisição AJAX para visualizar
        fetch(url)
          .then(response => response.json())
          .then(data => {
            document.body.removeChild(loadingDiv);
            exibirRelatorio(tipo, data);
          })
          .catch(error => {
            document.body.removeChild(loadingDiv);
            console.error('Erro ao gerar relatório:', error);
            alert('Erro ao gerar relatório. Verifique o console para mais detalhes.');
          });
      } else {
        // Para exportação (PDF, Excel)
        params.append('tipo', tipo);
        url = `/rh/api/relatorios/exportar/${formato}?${params}`;
        
        // Fazer download direto
        window.open(url, '_blank');
        setTimeout(() => {
          document.body.removeChild(loadingDiv);
        }, 2000);
      }
    }
    
    function exibirRelatorio(tipo, data) {
      // Criar modal para exibir o relatório
      const modal = document.createElement('div');
      modal.className = 'modal-overlay';
      modal.innerHTML = `
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Relatório - ${tipo.replace('-', ' ').toUpperCase()}</h5>
              <button type="button" class="btn-close" onclick="fecharModal(this)">&times;</button>
            </div>
            <div class="modal-body">
              <div id="relatorio-content"></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" onclick="fecharModal(this)">Fechar</button>
              <button type="button" class="btn btn-primary" onclick="gerarRelatorio('${tipo}', 'pdf')">Exportar PDF</button>
              <button type="button" class="btn btn-success" onclick="gerarRelatorio('${tipo}', 'excel')">Exportar Excel</button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
      
      // Formatar dados baseado no tipo
      const content = document.getElementById('relatorio-content');
      formatarDadosRelatorio(tipo, data, content);
    }
    
    function fecharModal(btn) {
      const modal = btn.closest('.modal-overlay');
      document.body.removeChild(modal);
    }
    
    function formatarDadosRelatorio(tipo, data, container) {
      let html = '';
      
      switch(tipo) {
        case 'analitica':
          html = `
            <div class="resumo-cards">
              <div class="resumo-item">
                <h5>Total Salários</h5>
                <h3 class="text-primary">R$ ${data.totalSalarios ? data.totalSalarios.toFixed(2) : '0,00'}</h3>
              </div>
              <div class="resumo-item">
                <h5>Total Descontos</h5>
                <h3 class="text-danger">R$ ${data.totalDescontos ? data.totalDescontos.toFixed(2) : '0,00'}</h3>
              </div>
              <div class="resumo-item">
                <h5>Total Líquido</h5>
                <h3 class="text-success">R$ ${data.totalLiquido ? data.totalLiquido.toFixed(2) : '0,00'}</h3>
              </div>
              <div class="resumo-item">
                <h5>Colaboradores</h5>
                <h3 class="text-info">${data.itens ? data.itens.length : 0}</h3>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>Departamento</th>
                    <th>Cargo</th>
                    <th>Salário Base</th>
                    <th>INSS</th>
                    <th>IRRF</th>
                    <th>Total Descontos</th>
                    <th>Salário Líquido</th>
                  </tr>
                </thead>
                <tbody>
          `;
          if (data.itens) {
            data.itens.forEach(item => {
              html += `
                <tr>
                  <td>${item.nomeColaborador || ''}</td>
                  <td>${item.departamento || ''}</td>
                  <td>${item.cargo || ''}</td>
                  <td>R$ ${item.salarioBase ? item.salarioBase.toFixed(2) : '0,00'}</td>
                  <td>R$ ${item.inss ? item.inss.toFixed(2) : '0,00'}</td>
                  <td>R$ ${item.irrf ? item.irrf.toFixed(2) : '0,00'}</td>
                  <td>R$ ${item.totalDescontos ? item.totalDescontos.toFixed(2) : '0,00'}</td>
                  <td>R$ ${item.salarioLiquido ? item.salarioLiquido.toFixed(2) : '0,00'}</td>
                </tr>
              `;
            });
          }
          html += `
                </tbody>
              </table>
            </div>
          `;
          break;
          
        case 'gerencial':
          html = `
            <div class="resumo-cards">
              <div class="resumo-item">
                <h5>Total Colaboradores</h5>
                <h3 class="text-primary">${data.totalColaboradores || 0}</h3>
              </div>
              <div class="resumo-item">
                <h5>Total Folha</h5>
                <h3 class="text-success">R$ ${data.totalFolha ? data.totalFolha.toFixed(2) : '0,00'}</h3>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Departamento</th>
                    <th>Colaboradores</th>
                    <th>Custo Total</th>
                    <th>Média Salarial</th>
                  </tr>
                </thead>
                <tbody>
          `;
          if (data.resumoPorDepartamento) {
            Object.values(data.resumoPorDepartamento).forEach(resumo => {
              html += `
                <tr>
                  <td>${resumo.departamento || ''}</td>
                  <td>${resumo.colaboradores || 0}</td>
                  <td>R$ ${resumo.custoTotal ? resumo.custoTotal.toFixed(2) : '0,00'}</td>
                  <td>R$ ${resumo.mediaSalarial ? resumo.mediaSalarial.toFixed(2) : '0,00'}</td>
                </tr>
              `;
            });
          }
          html += `
                </tbody>
              </table>
            </div>
          `;
          break;
          
        default:
          html = '<div class="alert alert-warning">Formato de relatório não suportado.</div>';
      }
      
      container.innerHTML = html;
    }

    function exportarTodosRelatorios() {
      if (confirm('Deseja exportar todos os relatórios? Esta operação pode demorar alguns minutos.')) {
        alert('Iniciando exportação de todos os relatórios...');
        // Implementar exportação em lote
      }
    }

    function verDetalhesColaborador(id) {
      alert(`Visualizando detalhes do colaborador ${id}`);
      // Implementar visualização de detalhes
    }

    function gerarHolerite(id) {
      alert(`Gerando holerite para o colaborador ${id}`);
      // Implementar geração de holerite individual
    }
  </script>
  
  <style>
    .resumo-executivo {
      margin: 20px 0;
    }
    
    .resumo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }
    
    .resumo-card {
      display: flex;
      align-items: center;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    
    .resumo-card:hover {
      transform: translateY(-2px);
    }
    
    .resumo-card.salarios {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .resumo-card.descontos {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .resumo-card.liquido {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }
    
    .resumo-card.colaboradores {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      color: white;
    }
    
    .resumo-icon {
      font-size: 32px;
      margin-right: 20px;
      opacity: 0.9;
    }
    
    .resumo-valor {
      font-size: 24px;
      font-weight: bold;
      margin: 5px 0;
    }
    
    .resumo-variacao {
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .resumo-variacao.positiva {
      color: #d4edda;
    }
    
    .resumo-variacao.negativa {
      color: #f8d7da;
    }
    
    .resumo-variacao.neutra {
      color: #e2e3e5;
    }
    
    .charts-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    
    .chart-card {
      padding: 20px;
    }
    
    .relatorios-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .relatorio-item {
      display: flex;
      align-items: flex-start;
      padding: 20px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      background: #f8f9fa;
      transition: box-shadow 0.2s;
    }
    
    .relatorio-item:hover {
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .relatorio-icon {
      font-size: 24px;
      color: #007bff;
      margin-right: 15px;
      margin-top: 5px;
    }
    
    .relatorio-info h4 {
      margin-bottom: 8px;
      color: #333;
    }
    
    .relatorio-info p {
      margin-bottom: 15px;
      color: #666;
      font-size: 14px;
    }
    
    .relatorio-actions {
      display: flex;
      gap: 10px;
    }
    
    .table-responsive {
      overflow-x: auto;
    }
    
    .total-row {
      background: #f8f9fa;
      font-weight: bold;
    }
    
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    
    .modal-dialog {
      background: white;
      border-radius: 8px;
      max-width: 90vw;
      max-height: 90vh;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f8f9fa;
    }
    
    .modal-title {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
    }
    
    .btn-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-close:hover {
      color: #000;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .modal-footer {
      padding: 20px;
      border-top: 1px solid #e9ecef;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      background: #f8f9fa;
    }
    
    .resumo-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .resumo-item {
      text-align: center;
      padding: 15px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      background: #f8f9fa;
    }
    
    .resumo-item h5 {
      margin-bottom: 10px;
      color: #666;
      font-size: 14px;
    }
    
    .resumo-item h3 {
      margin: 0;
      font-size: 20px;
    }
    
    .text-primary { color: #007bff !important; }
    .text-success { color: #28a745 !important; }
    .text-danger { color: #dc3545 !important; }
    .text-info { color: #17a2b8 !important; }
    
    @media (max-width: 768px) {
      .charts-container {
        grid-template-columns: 1fr;
      }
      
      .resumo-grid {
        grid-template-columns: 1fr;
      }
      
      .relatorios-grid {
        grid-template-columns: 1fr;
      }
      
      .modal-dialog {
        max-width: 95vw;
        margin: 10px;
      }
      
      .resumo-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script th:src="@{/js/notifications.js}"></script>
  <script th:src="@{/js/sidebar.js}"></script>

</body>

</html>
