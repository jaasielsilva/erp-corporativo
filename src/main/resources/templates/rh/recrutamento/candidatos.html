<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Recrutamento - Candidatos</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/style.css" rel="stylesheet"><link href="/css/sidebar.css" rel="stylesheet"><link href="/css/notifications.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="app-container"><aside th:replace="~{components/sidebar :: sidebar}"></aside><main class="main-content"><header th:replace="~{components/topbar :: topbar}"></header><section class="content-area"><div class="container-fluid"><div class="row"><div class="col-12"><h1 class="h4 mb-3"><i class="fas fa-user-plus me-2"></i>Recrutamento - Candidatos</h1><div class="card"><div class="card-body">
<form class="mb-3" onsubmit="event.preventDefault(); criar();"><div class="row g-3"><div class="col-md-3"><label class="form-label">Nome</label><input type="text" id="nome" class="form-control" required></div><div class="col-md-3"><label class="form-label">Email</label><input type="email" id="email" class="form-control"></div><div class="col-md-2"><label class="form-label">Telefone</label><input type="text" id="telefone" class="form-control"></div><div class="col-md-2"><label class="form-label">Gênero</label><select id="genero" class="form-select"><option value="">Selecione</option><option>Feminino</option><option>Masculino</option><option>Outro</option></select></div><div class="col-md-2"><label class="form-label">Nascimento</label><input type="date" id="nasc" class="form-control"></div></div><div class="mt-3"><button class="btn btn-primary"><i class="fas fa-plus me-2"></i>Criar</button></div></form>
<div class="row g-3 align-items-end mb-3"><div class="col-md-4"><label class="form-label">Buscar</label><input type="text" id="buscar" class="form-control" placeholder="Nome, email..."></div><div class="col-md-2"><button class="btn btn-secondary w-100" id="btnBuscar"><i class="fas fa-search me-1"></i>Buscar</button></div></div><div class="table-responsive"><table class="table table-striped"><thead><tr><th>ID</th><th>Nome</th><th>Email</th><th>Telefone</th><th>Gênero</th></tr></thead><tbody id="tbody"></tbody></table></div>
</div></div></div></div></div></section><footer th:replace="~{components/footer :: footer}"></footer></main></div>
<script src="/js/sidebar.js" defer></script><script src="https://code.jquery.com/jquery-3.7.0.min.js"></script><script th:src="@{/js/notifications.js}"></script>
<script>
function criar(){ const btn = $('.btn.btn-primary'); btn.prop('disabled', true); const nome=$('#nome').val(), email=$('#email').val(), telefone=$('#telefone').val(), genero=$('#genero').val(), dataNascimento=$('#nasc').val(); $.post('/api/rh/recrutamento/candidatos',{nome,email,telefone,genero,dataNascimento}).done(function(r){ if(r.success){ if(typeof showToast==='function'){ showToast({title:'Recrutamento',message:'Candidato criado',priority:'LOW'});} $('#nome').val(''); $('#email').val(''); $('#telefone').val(''); $('#genero').val(''); $('#nasc').val(''); carregar(); } }).always(function(){ btn.prop('disabled', false); }); }
function carregar(){ const q = $('#buscar').val()||null; $.get('/api/rh/recrutamento/candidatos', {q, page:0, size:50}).done(function(page){ const list = (page&&page.content)||[]; const tbody = document.getElementById('tbody'); tbody.innerHTML = ''; list.forEach(function(c){ const tr = document.createElement('tr'); tr.innerHTML = `<td>${c.id}</td><td>${c.nome||'-'}</td><td>${c.email||'-'}</td><td>${c.telefone||'-'}</td><td>${c.genero||'-'}</td>`; tbody.appendChild(tr); }); }); }
$(document).ready(function(){ carregar(); $('#btnBuscar').on('click', carregar); $('#buscar').on('keyup', function(e){ if(e.key==='Enter') carregar(); }); });
</script>
</body>
</html>
