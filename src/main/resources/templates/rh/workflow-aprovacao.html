<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow de Aprovação - Portal CEO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link th:href="@{/css/sidebar.css}" rel="stylesheet">
    <link th:href="@{/css/notifications.css}" rel="stylesheet">
    
</head>
<body>
    <div class="app-container">
        <aside th:replace="~{components/sidebar :: sidebar}"></aside>
        <main class="main-content">
            <header th:replace="~{components/topbar :: topbar}"></header>
            <section class="content-area">
                <div class="container-fluid py-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="mb-0"><i class="fas fa-tasks me-2"></i>Workflow de Aprovação</h2>
                        <p class="text-muted mb-0">Gerencie processos de adesão de colaboradores</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary" onclick="atualizarDados()">
                            <i class="fas fa-sync-alt me-1"></i>Atualizar
                        </button>
                        <a href="/rh/workflow/relatorios" class="btn btn-info">
                            <i class="fas fa-chart-bar me-1"></i>Relatórios
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Cards -->
        <div class="row mb-4" th:if="${estatisticas}">
            <div class="col-md-3">
                <div class="card dashboard-card text-center">
                    <div class="card-body">
                        <div class="text-warning mb-2">
                            <i class="fas fa-clock fa-2x"></i>
                        </div>
                        <h4 class="mb-1" th:text="${estatisticas.processosAguardandoAprovacao ?: 0}">0</h4>
                        <p class="text-muted mb-0">Aguardando Aprovação</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card dashboard-card text-center">
                    <div class="card-body">
                        <div class="text-primary mb-2">
                            <i class="fas fa-calendar-day fa-2x"></i>
                        </div>
                        <h4 class="mb-1" th:text="${estatisticas.processosHoje ?: 0}">0</h4>
                        <p class="text-muted mb-0">Processos Hoje</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card dashboard-card text-center">
                    <div class="card-body">
                        <div class="text-success mb-2">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                        <h4 class="mb-1" th:text="${estatisticas.processosPorStatus['APROVADO'] ?: 0}">0</h4>
                        <p class="text-muted mb-0">Aprovados</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card dashboard-card text-center">
                    <div class="card-body">
                        <div class="text-danger mb-2">
                            <i class="fas fa-times-circle fa-2x"></i>
                        </div>
                        <h4 class="mb-1" th:text="${estatisticas.processosPorStatus['REJEITADO'] ?: 0}">0</h4>
                        <p class="text-muted mb-0">Rejeitados</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-end">
                            <div class="col-md-3">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="filtroStatus" onchange="filtrarProcessos()">
                                    <option value="AGUARDANDO_APROVACAO">Aguardando Aprovação</option>
                                    <option value="APROVADO">Aprovados</option>
                                    <option value="REJEITADO">Rejeitados</option>
                                    <option value="EM_ANDAMENTO">Em Andamento</option>
                                    <option value="CANCELADO">Cancelados</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">Buscar</label>
                                <input type="text" class="form-control" id="buscarProcesso" placeholder="Nome ou CPF">
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary w-100" onclick="buscarProcessos()">
                                    <i class="fas fa-search me-1"></i>Buscar
                                </button>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-outline-secondary w-100" onclick="limparFiltros()">
                                    <i class="fas fa-eraser me-1"></i>Limpar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de Processos -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-list me-2"></i>Processos de Adesão</h5>
                    </div>
                    <div class="card-body">
                        <div id="loadingProcessos" class="text-center py-4" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Carregando...</span>
                            </div>
                            <p class="mt-2">Carregando processos...</p>
                        </div>
                        
                        <div id="listaProcessos">
                            <!-- Processos serão carregados via AJAX -->
                        </div>
                        
                        <!-- Paginação -->
                        <nav id="paginacao" class="mt-4" style="display: none;">
                            <ul class="pagination justify-content-center" id="paginationList">
                                <!-- Paginação será gerada via JavaScript -->
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Processo -->
    <div class="modal fade" id="modalDetalhes" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-user me-2"></i>Detalhes do Processo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="detalhesProcesso">
                    <!-- Conteúdo será carregado via AJAX -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Aprovação -->
    <div class="modal fade" id="modalAprovacao" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title"><i class="fas fa-check me-2"></i>Aprovar Processo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formAprovacao">
                        <input type="hidden" id="processoIdAprovacao">
                        <div class="mb-3">
                            <label class="form-label">Aprovado por *</label>
                            <input type="text" class="form-control" id="aprovadoPor" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Observações</label>
                            <textarea class="form-control" id="observacoesAprovacao" rows="3" placeholder="Observações sobre a aprovação (opcional)"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success" onclick="confirmarAprovacao()">
                        <i class="fas fa-check me-1"></i>Aprovar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Rejeição -->
    <div class="modal fade" id="modalRejeicao" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title"><i class="fas fa-times me-2"></i>Rejeitar Processo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formRejeicao">
                        <input type="hidden" id="processoIdRejeicao">
                        <div class="mb-3">
                            <label class="form-label">Motivo da Rejeição *</label>
                            <textarea class="form-control" id="motivoRejeicao" rows="3" required placeholder="Descreva o motivo da rejeição"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Responsável *</label>
                            <input type="text" class="form-control" id="usuarioResponsavel" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" onclick="confirmarRejeicao()">
                        <i class="fas fa-times me-1"></i>Rejeitar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        let paginaAtual = 0;
        let statusAtual = 'AGUARDANDO_APROVACAO';
        
        // Carregar processos ao inicializar
        document.addEventListener('DOMContentLoaded', function() {
            // Limpeza preventiva de elementos bloqueadores
            setTimeout(() => {
                // Remove backdrops órfãos do Bootstrap
                const orphanBackdrops = document.querySelectorAll('.modal-backdrop');
                orphanBackdrops.forEach(backdrop => backdrop.remove());
                
                // Garante que overlays de notificação estejam corretos
                const notificationOverlays = document.querySelectorAll('.notification-overlay');
                notificationOverlays.forEach(overlay => {
                    if (!overlay.classList.contains('show')) {
                        overlay.style.zIndex = '-1';
                        overlay.style.pointerEvents = 'none';
                        overlay.style.visibility = 'hidden';
                    }
                });
                
                // Remove qualquer elemento com z-index muito alto que possa estar bloqueando
                const allElements = document.querySelectorAll('*');
                allElements.forEach(el => {
                    const zIndex = window.getComputedStyle(el).zIndex;
                    if (zIndex && parseInt(zIndex) > 2000 && !el.classList.contains('modal')) {
                        el.style.pointerEvents = 'none';
                    }
                });
                
                // Força que todos os botões de ação sejam clicáveis
                const actionButtons = document.querySelectorAll('.btn-action, .btn-outline-success, .btn-outline-danger, .btn-outline-info');
                actionButtons.forEach(btn => {
                    btn.style.pointerEvents = 'auto';
                    btn.style.position = 'relative';
                    btn.style.zIndex = '25';
                });
            }, 500);
            
            carregarProcessos();
        });
        
        function carregarProcessos(pagina = 0, termoBusca = '') {
            paginaAtual = pagina;
            const loadingElement = document.getElementById('loadingProcessos');
            const listaElement = document.getElementById('listaProcessos');
            
            if (loadingElement) loadingElement.style.display = 'block';
            if (listaElement) listaElement.innerHTML = '';
            
            let url = `/rh/workflow/api/processos?status=${statusAtual}&page=${pagina}&size=5`;
            
            if (termoBusca) {
                url += `&search=${encodeURIComponent(termoBusca)}`;
            }
            
            fetch(url)
                .then(response => {
                    if (loadingElement) loadingElement.style.display = 'none';
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const contentType = response.headers.get('content-type');
                    if (!contentType || !contentType.includes('application/json')) {
                        throw new Error('Resposta não é JSON válido - possível problema de autenticação');
                    }
                    
                    return response.json();
                })
                .then(data => {
                    if (data.erro) {
                        renderizarProcessosVazio('Erro: ' + data.erro);
                        return;
                    }
                    
                    renderizarProcessos(data.processos || []);
                    renderizarPaginacao(data);
                })
                .catch(error => {
                    if (loadingElement) loadingElement.style.display = 'none';
                    console.error('Erro ao carregar processos:', error);
                    
                    // Em vez de mostrar erro, renderizar estado vazio
                    renderizarProcessosVazio('Não foi possível carregar os processos. Verifique sua conexão.');
                });
        }
        
        function renderizarProcessosVazio(mensagem) {
             const container = document.getElementById('listaProcessos');
             if (container) {
                 container.innerHTML = `
                     <div class="text-center py-4">
                         <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                         <h5 class="text-muted">${mensagem}</h5>
                         <button class="btn btn-primary mt-3" onclick="carregarProcessos(0)">
                             <i class="fas fa-refresh"></i> Tentar Novamente
                         </button>
                     </div>
                 `;
             }
         }
        
        function renderizarProcessos(processos) {
            const container = document.getElementById('listaProcessos');
            
            if (!processos || processos.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4">
                        <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">Nenhum processo encontrado</h5>
                        <p class="text-muted">Não há processos com o status selecionado.</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="table-responsive">';
            html += '<table class="table table-hover">';
            html += `
                <thead class="table-light">
                    <tr>
                        <th>Colaborador</th>
                        <th>CPF</th>
                        <th>Cargo</th>
                        <th>Status</th>
                        <th>Data Criação</th>
                        <th>Custo Mensal</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
            `;
            
            processos.forEach(processo => {
                const statusClass = getStatusClass(processo.status);
                const statusText = getStatusText(processo.status);
                
                html += `
                    <tr>
                        <td>
                            <div>
                                <strong>${processo.nomeColaborador}</strong><br>
                                <small class="text-muted">${processo.emailColaborador}</small>
                            </div>
                        </td>
                        <td>${formatarCPF(processo.cpfColaborador)}</td>
                        <td>${processo.cargo || '-'}</td>
                        <td><span class="badge ${statusClass}">${statusText}</span></td>
                        <td>${processo.dataCriacaoFormatada}</td>
                        <td>${processo.custoTotalFormatado}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-info btn-action" onclick="verDetalhes(${processo.id})" title="Ver Detalhes">
                                <i class="fas fa-eye"></i>
                            </button>
                            ${processo.status === 'AGUARDANDO_APROVACAO' ? `
                                <button class="btn btn-sm btn-outline-success btn-action" onclick="abrirModalAprovacao(${processo.id})" title="Aprovar">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger btn-action" onclick="abrirModalRejeicao(${processo.id})" title="Rejeitar">
                                    <i class="fas fa-times"></i>
                                </button>
                            ` : ''}
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
            
            // Garante que os novos botões sejam clicáveis
            setTimeout(() => {
                const newActionButtons = container.querySelectorAll('.btn-action, .btn-outline-success, .btn-outline-danger, .btn-outline-info');
                newActionButtons.forEach(btn => {
                    btn.style.pointerEvents = 'auto';
                    btn.style.position = 'relative';
                    btn.style.zIndex = '25';
                });
            }, 100);
        }
        
        function renderizarPaginacao(data) {
            const paginacao = document.getElementById('paginacao');
            const paginationList = document.getElementById('paginationList');
            
            if (data.totalPages <= 1) {
                paginacao.style.display = 'none';
                return;
            }
            
            paginacao.style.display = 'block';
            let html = '';
            
            // Botão Anterior
            html += `
                <li class="page-item ${!data.hasPrevious ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="${data.hasPrevious ? `carregarProcessos(${data.currentPage - 1})` : 'return false;'}">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                </li>
            `;
            
            // Páginas
            for (let i = 0; i < data.totalPages; i++) {
                html += `
                    <li class="page-item ${i === data.currentPage ? 'active' : ''}">
                        <a class="page-link" href="#" onclick="carregarProcessos(${i})">${i + 1}</a>
                    </li>
                `;
            }
            
            // Botão Próximo
            html += `
                <li class="page-item ${!data.hasNext ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="${data.hasNext ? `carregarProcessos(${data.currentPage + 1})` : 'return false;'}">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
            `;
            
            paginationList.innerHTML = html;
        }
        
        function filtrarProcessos() {
            statusAtual = document.getElementById('filtroStatus').value;
            carregarProcessos(0);
        }
        
        function buscarProcessos() {
            const termoBusca = document.getElementById('buscarProcesso').value.trim();
            carregarProcessos(0, termoBusca);
        }
        
        function limparFiltros() {
            document.getElementById('filtroStatus').value = 'AGUARDANDO_APROVACAO';
            document.getElementById('buscarProcesso').value = '';
            statusAtual = 'AGUARDANDO_APROVACAO';
            carregarProcessos(0);
        }
        
        function atualizarDados() {
            carregarProcessos(paginaAtual);
        }
        
        function verDetalhes(processoId) {
            fetch(`/rh/workflow/api/processo/${processoId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.erro) {
                        mostrarErro('Erro ao carregar detalhes: ' + data.erro);
                        return;
                    }
                    
                    renderizarDetalhes(data.processo);
                    new bootstrap.Modal(document.getElementById('modalDetalhes')).show();
                })
                .catch(error => {
                    mostrarErro('Erro ao carregar detalhes: ' + error.message);
                });
        }
        
        function renderizarDetalhes(processo) {
            const container = document.getElementById('detalhesProcesso');
            
            let html = `
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-user me-2"></i>Dados Pessoais</h6>
                        <table class="table table-sm">
                            <tr><td><strong>Nome:</strong></td><td>${processo.nomeColaborador}</td></tr>
                            <tr><td><strong>Email:</strong></td><td>${processo.emailColaborador}</td></tr>
                            <tr><td><strong>CPF:</strong></td><td>${formatarCPF(processo.cpfColaborador)}</td></tr>
                            <tr><td><strong>Cargo:</strong></td><td>${processo.cargo || '-'}</td></tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-info-circle me-2"></i>Status do Processo</h6>
                        <table class="table table-sm">
                            <tr><td><strong>Status:</strong></td><td><span class="badge ${getStatusClass(processo.status)}">${getStatusText(processo.status)}</span></td></tr>
                            <tr><td><strong>Etapa:</strong></td><td>${processo.etapaAtual || '-'}</td></tr>
                            <tr><td><strong>Criado em:</strong></td><td>${processo.dataCriacaoFormatada}</td></tr>
                            <tr><td><strong>Custo Mensal:</strong></td><td>${processo.custoTotalFormatado}</td></tr>
                        </table>
                    </div>
                </div>
            `;
            
            if (processo.observacoes) {
                html += `
                    <div class="row mt-3">
                        <div class="col-12">
                            <h6><i class="fas fa-comment me-2"></i>Observações</h6>
                            <div class="alert alert-info">${processo.observacoes}</div>
                        </div>
                    </div>
                `;
            }
            
            // Botão para ver histórico
            html += `
                <div class="row mt-3">
                    <div class="col-12">
                        <button class="btn btn-outline-primary" onclick="verHistorico(${processo.id})">
                            <i class="fas fa-history me-1"></i>Ver Histórico
                        </button>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        function verHistorico(processoId) {
            // Implementar visualização do histórico
            window.open(`/rh/workflow/processo/${processoId}`, '_blank');
        }
        
        function abrirModalAprovacao(processoId) {
            document.getElementById('processoIdAprovacao').value = processoId;
            document.getElementById('aprovadoPor').value = '';
            document.getElementById('observacoesAprovacao').value = '';
            new bootstrap.Modal(document.getElementById('modalAprovacao')).show();
        }
        
        function confirmarAprovacao() {
            const processoId = document.getElementById('processoIdAprovacao').value;
            const aprovadoPor = document.getElementById('aprovadoPor').value;
            const observacoes = document.getElementById('observacoesAprovacao').value;
            
            if (!aprovadoPor.trim()) {
                mostrarErro('Nome do aprovador é obrigatório');
                return;
            }
            
            const dados = {
                aprovadoPor: aprovadoPor,
                observacoes: observacoes
            };
            
            fetch(`/rh/workflow/api/processo/${processoId}/aprovar`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(dados)
            })
            .then(response => response.json())
            .then(data => {
                if (data.erro) {
                    mostrarErro('Erro ao aprovar processo: ' + data.erro);
                    return;
                }
                
                mostrarSucesso('Processo aprovado com sucesso!');
                bootstrap.Modal.getInstance(document.getElementById('modalAprovacao')).hide();
                carregarProcessos(paginaAtual);
            })
            .catch(error => {
                mostrarErro('Erro ao aprovar processo: ' + error.message);
            });
        }
        
        function abrirModalRejeicao(processoId) {
            document.getElementById('processoIdRejeicao').value = processoId;
            document.getElementById('motivoRejeicao').value = '';
            document.getElementById('usuarioResponsavel').value = '';
            new bootstrap.Modal(document.getElementById('modalRejeicao')).show();
        }
        
        function confirmarRejeicao() {
            const processoId = document.getElementById('processoIdRejeicao').value;
            const motivoRejeicao = document.getElementById('motivoRejeicao').value;
            const usuarioResponsavel = document.getElementById('usuarioResponsavel').value;
            
            if (!motivoRejeicao.trim()) {
                mostrarErro('Motivo da rejeição é obrigatório');
                return;
            }
            
            if (!usuarioResponsavel.trim()) {
                mostrarErro('Usuário responsável é obrigatório');
                return;
            }
            
            const dados = {
                motivoRejeicao: motivoRejeicao,
                usuarioResponsavel: usuarioResponsavel
            };
            
            fetch(`/rh/workflow/api/processo/${processoId}/rejeitar`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(dados)
            })
            .then(response => response.json())
            .then(data => {
                if (data.erro) {
                    mostrarErro('Erro ao rejeitar processo: ' + data.erro);
                    return;
                }
                
                mostrarSucesso('Processo rejeitado com sucesso!');
                bootstrap.Modal.getInstance(document.getElementById('modalRejeicao')).hide();
                carregarProcessos(paginaAtual);
            })
            .catch(error => {
                mostrarErro('Erro ao rejeitar processo: ' + error.message);
            });
        }
        
        // Funções auxiliares
        function getStatusClass(status) {
            const classes = {
                'AGUARDANDO_APROVACAO': 'bg-warning text-dark',
                'APROVADO': 'bg-success',
                'REJEITADO': 'bg-danger',
                'EM_ANDAMENTO': 'bg-info',
                'CANCELADO': 'bg-secondary'
            };
            return classes[status] || 'bg-secondary';
        }
        
        function getStatusText(status) {
            const texts = {
                'AGUARDANDO_APROVACAO': 'Aguardando Aprovação',
                'APROVADO': 'Aprovado',
                'REJEITADO': 'Rejeitado',
                'EM_ANDAMENTO': 'Em Andamento',
                'CANCELADO': 'Cancelado'
            };
            return texts[status] || status;
        }
        
        function formatarCPF(cpf) {
            if (!cpf) return '-';
            return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
        }
        
        function mostrarSucesso(mensagem) {
            // Implementar notificação de sucesso
            alert(mensagem);
        }
        
        function mostrarErro(mensagem) {
            // Implementar notificação de erro
            alert(mensagem);
        }
    </script>
                </div>
            </section>
        </main>
    </div>
    
    <div th:replace="~{components/footer :: footer}"></div>
    
    <script th:src="@{/js/sidebar.js}"></script>
    <script th:src="@{/js/notifications.js}"></script>
</body>
</html>