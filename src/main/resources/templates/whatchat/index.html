<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WhaTchat - WhatsApp</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/sidebar.css" />
  <link rel="stylesheet" href="/css/notifications.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-demi@0.14.6/lib/index.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pinia@2.1.7/dist/pinia.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>

<body>
  <div class="app-container">
    <aside th:replace="~{components/sidebar :: sidebar}"></aside>
    <main class="main-content">
      <header th:replace="~{components/topbar :: topbar}"></header>
      <section class="content-area">
        <style>
          .whatchat-shell {
            display: flex;
            height: calc(100vh - 80px);
            border: 1px solid #d1d7db;
            border-radius: 12px;
            overflow: hidden;
            background: #fff;
          }

          .whatchat-list {
            width: 360px;
            border-right: 1px solid #d1d7db;
            background: #fff;
            display: flex;
            flex-direction: column;
          }

          .whatchat-header {
            display: flex;
            gap: 10px;
            padding: 12px 14px;
            border-bottom: 1px solid #d1d7db;
            align-items: center;
            background: #f0f2f5;
          }

          .whatchat-title {
            font-weight: 700;
            letter-spacing: .2px;
            flex: 1;
          }

          .whatchat-search {
            padding: 10px 12px;
            border-bottom: 1px solid #d1d7db;
            background: #fff;
          }

          .whatchat-search input {
            border-radius: 999px;
            background: #f0f2f5;
            border-color: #f0f2f5;
          }

          .whatchat-search input:focus {
            background: #fff;
            border-color: #cfd7df;
            box-shadow: none;
          }

          .whatchat-items {
            flex: 1;
            overflow: auto;
          }

          .whatchat-item {
            padding: 10px 14px;
            border-bottom: 1px solid #eef2f7;
            cursor: pointer;
            display: flex;
            gap: 12px;
            align-items: center;
          }

          .whatchat-item:hover {
            background: #f7f8fa;
          }

          .whatchat-item.active {
            background: #e9f5ff;
          }

          .whatchat-item .avatar {
            width: 42px;
            height: 42px;
            border-radius: 999px;
            background: #dbeafe;
            color: #1d4ed8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
          }

          .whatchat-item .item-main {
            flex: 1;
            min-width: 0;
          }

          .whatchat-item .item-top {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            align-items: baseline;
          }

          .whatchat-item .item-name {
            font-weight: 700;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
          }

          .whatchat-item .item-time {
            font-size: 12px;
            color: #667781;
            white-space: nowrap;
          }

          .whatchat-item .item-meta {
            font-size: 12px;
            color: #667781;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
          }

          .whatchat-item .item-badge {
            margin-left: auto;
          }

          .whatchat-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #efeae2;
          }

          .chat-top {
            padding: 12px 16px;
            border-bottom: 1px solid #d1d7db;
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            background: #f0f2f5;
          }

          .chat-top .avatar {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            background: #e5e7eb;
            color: #374151;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
          }

          .chat-top .title {
            display: flex;
            flex-direction: column;
            line-height: 1.1;
          }

          .chat-top .title .name {
            font-weight: 700;
          }

          .chat-top .title .meta {
            font-size: 12px;
            color: #667781;
          }

          .chat-messages {
            flex: 1;
            overflow: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: #efeae2;
          }

          .message {
            display: flex;
          }

          .message.incoming {
            justify-content: flex-start;
          }

          .message.outgoing {
            justify-content: flex-end;
          }

          .bubble {
            max-width: 72%;
            padding: 8px 10px;
            border-radius: 10px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, .06);
          }

          .incoming .bubble {
            background: #fff;
            color: #111827;
            border-top-left-radius: 4px;
          }

          .outgoing .bubble {
            background: #d9fdd3;
            color: #111827;
            border-top-right-radius: 4px;
          }

          .bubble .sub {
            font-size: 11px;
            color: #667781;
            margin-top: 6px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
          }

          .bubble a {
            color: inherit;
            text-decoration: underline;
          }

          .chat-composer {
            display: flex;
            gap: 10px;
            padding: 10px 12px;
            border-top: 1px solid #d1d7db;
            background: #f0f2f5;
            align-items: center;
          }

          .chat-composer .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
          }

          .chat-composer .composer-input {
            border-radius: 999px;
            border-color: #cfd7df;
          }

          .chat-composer .composer-input:focus {
            box-shadow: none;
            border-color: #9aa6b2;
          }

          .chat-empty {
            padding: 24px;
            color: #667781;
          }

          @media (max-width: 992px) {
            .whatchat-shell {
              height: calc(100vh - 120px);
            }

            .whatchat-list {
              width: 320px;
            }

            .bubble {
              max-width: 86%;
            }
          }
        </style>
        <div class="container-fluid py-2">
          <div id="app"></div>
        </div>
      </section>
      <footer th:replace="~{components/footer :: footer}"></footer>
    </main>
  </div>
  <script th:inline="javascript">
    window.WHATCHAT_USER_ID = [[${ usuarioId }]];
    window.WHATCHAT_USER_NAME = [[${ #strings.escapeJavaScript(usuarioNome) }]];
  </script>
  <script src="/js/whatchat-app.js"></script>
  <script th:src="@{/js/notifications.js}"></script>
  <script src="/js/sidebar.js" defer></script>
</body>

</html>